// Generated by CoffeeScript 1.6.2
(function() {
  $(document).ready(function() {
    var loading, orientationEvent, progressValue, roundNumber, sidebarDashHidden, sidebarMapHidden, supportsOrientationChange, updateButtons;

    $("[rel=tooltip]").tooltip({
      placement: "bottom"
    });
    $(".dropdown-menu input, .dropdown-menu label").click(function(e) {
      return e.stopPropagation();
    });
    $(function() {
      return $("#charts-content").masonry({
        itemSelector: ".chart",
        animationOptions: {
          duration: 1000
        }
      });
    });
    updateButtons = function() {
      if ($(window).width() < 940) {
        $("#btn-charts").addClass("btn-block");
        return $("#btn-map").addClass("btn-block");
      } else {
        $("#btn-charts").removeClass("btn-block");
        return $("#btn-map").removeClass("btn-block");
      }
    };
    updateButtons();
    $("#btn-map").click(function() {
      $(this).prop("disabled", true);
      $("#btn-charts").prop("disabled", false);
      $(".dash").hide();
      return $(".nav-collapse").collapse("hide");
    });
    $("#btn-charts").click(function() {
      $(this).prop("disabled", true);
      $("#btn-map").prop("disabled", false);
      $(".dash").show();
      return $(".nav-collapse").collapse("hide");
    });
    sidebarMapHidden = 1;
    $("#sidebar-map").toggleClass("sidebar-map-hidden", 500);
    $("#sidebar-map-btn").click(function() {
      $("#sidebar-map").toggleClass("sidebar-map-hidden", 500);
      if (sidebarMapHidden) {
        $(this).children("i").prop("class", "icon-arrow-left");
        return sidebarMapHidden--;
      } else {
        $(this).children("i").prop("class", "icon-arrow-right");
        return sidebarMapHidden++;
      }
    });
    sidebarDashHidden = 1;
    $("#sidebar-dash").toggleClass("sidebar-dash-hidden", 500);
    $("#sidebar-dash-btn").click(function() {
      $("#sidebar-dash").toggleClass("sidebar-dash-hidden", 500);
      if (sidebarDashHidden) {
        $(this).children("i").prop("class", "icon-arrow-left");
        return sidebarDashHidden--;
      } else {
        $(this).children("i").prop("class", "icon-arrow-right");
        return sidebarDashHidden++;
      }
    });
    progressValue = 0;
    $("#progress").show("fade", {}, 300);
    $("#loading_logo").show("fade", {}, 1000);
    loading = setInterval(function() {
      progressValue += 50;
      $("#progressbar").css({
        width: progressValue + "%"
      });
      if (progressValue >= 100) {
        window.clearInterval(loading);
        $("#btn-map").prop("disabled", false);
        $("#btn-charts").prop("disabled", true);
        $(".loading").fadeOut(700);
        $("#navbar").slideDown(300);
        return reloadCharts();
      }
    }, 1000);
    supportsOrientationChange = "onorientationchange" in window;
    orientationEvent = (supportsOrientationChange ? "orientationchange" : "resize");
    window.addEventListener(orientationEvent, (function() {
      return updateButtons();
    }), false);
    $(".quick-btn a").on("click", function(event) {
      event.preventDefault();
      H5.Charts.state = $(this).prop("id");
      $(this).each(function() {
        return $("a").removeClass("active");
      });
      $(this).addClass("active");
      return reloadCharts();
    });
    String.prototype.toProperCase = function() {
      return this.replace(/\w\S*/g, function(txt) {
        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
      });
    };
    roundNumber = function(number, digits) {
      var multiple, rndedNum;

      multiple = Math.pow(10, digits);
      rndedNum = Math.round(number * multiple) / multiple;
      return rndedNum;
    };
    return $(function() {
      return $("input").keydown(function(e) {
        if (e.keyCode === 13) {
          return setTimeout((function() {
            return $("#submit").click();
          }), 0);
        }
      });
    });
  });

}).call(this);
