var googlemap = new L.Google();

var openstreetUrl = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', openstreetAttribution = '', openstreet = new L.TileLayer(openstreetUrl, {
    maxZoom : 18,
    attribution : openstreetAttribution
});

var cloudmadeUrl = 'http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png', cloudmadeAttribution = '', cloudmade = new L.TileLayer(cloudmadeUrl, {
    maxZoom : 18,
    attribution : cloudmadeAttribution
});

var mapquestUrl = 'http://otile{s}.mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png', mapquestAttribution = '', mapquest = new L.TileLayer(mapquestUrl, {
    maxZoom : 18,
    attribution : mapquestAttribution,
    subdomains : ['1', '2', '3', '4']
});

/*
 * var alertaLayer = new L.TileLayer.WMS("http://siscom.ibama.gov.br/geoserver/cemam/wms", {
 *     layers : 'cemam:alerta_teste',
 *     format : 'image/png',
 *     transparent : true
 * });
 */

var nasaLayer = new L.TileLayer.WMS("http://openscales.org/geoserver/ows", {
    layers : 'bluemarble',
    format : 'image/png',
    transparent : true
});

var biomasLayer = new L.TileLayer.WMS("http://www.hexinformatica.com.br/geoserver/hex/wms", {
    layers : 'hex:biomas',
    format : 'image/png',
    transparent : true
});

var estadosLayer = new L.TileLayer.WMS("http://www.hexinformatica.com.br/geoserver/hex/wms", {
    layers : 'hex:estados_ibge',
    format : 'image/png',
    transparent : true
});

var municipiosLayer = new L.TileLayer.WMS("http://www.hexinformatica.com.br/geoserver/hex/wms", {
    layers : 'hex:municipios_ibge',
    format : 'image/png',
    transparent : true
});

var terrasIndigenasLayer = new L.TileLayer.WMS("http://www.hexinformatica.com.br/geoserver/hex/wms", {
    layers : 'hex:terras_indigenas',
    format : 'image/png',
    transparent : true
});

var ucsSustentavelLayer = new L.TileLayer.WMS("http://www.hexinformatica.com.br/geoserver/hex/wms", {
    layers : 'hex:ucs_uso_sustentavel',
    format : 'image/png',
    transparent : true
});

var ucsProtecaoLayer = new L.TileLayer.WMS("http://www.hexinformatica.com.br/geoserver/hex/wms", {
    layers : 'hex:ucs_protecao_integral',
    format : 'image/png',
    transparent : true
});

var rodoviasLayer = new L.TileLayer.WMS("http://www.hexinformatica.com.br/geoserver/hex/wms", {
    layers : 'hex:rodovias_federais',
    format : 'image/png',
    transparent : true
});

var assentamentosLayer = new L.TileLayer.WMS("http://www.hexinformatica.com.br/geoserver/hex/wms", {
    layers : 'hex:assentamentos',
    format : 'image/png',
    transparent : true
});

var hidroPolyLayer = new L.TileLayer.WMS("http://www.hexinformatica.com.br/geoserver/hex/wms", {
    layers : 'hex:hidrografia_poligono',
    format : 'image/png',
    transparent : true
});

var hidroPereLayer = new L.TileLayer.WMS("http://www.hexinformatica.com.br/geoserver/hex/wms", {
    layers : 'hex:hidro_perene',
    format : 'image/png',
    transparent : true
});

var hidroInterLayer = new L.TileLayer.WMS("http://www.hexinformatica.com.br/geoserver/hex/wms", {
    layers : 'hex:hidro_intermitente',
    format : 'image/png',
    transparent : true
});

var imoveisLayer = new L.TileLayer.WMS("http://www.hexinformatica.com.br/geoserver/hex/wms", {
    layers : 'hex:imovel_certificado',
    format : 'image/png',
    transparent : true
});

var mosaicoImgNorteLayer = new L.TileLayer.WMS("http://geocatalogos.sccon.com.br:80/erdas-apollo/coverage/MMA_MOSAICO_QL_NORTE_ENTREGA_4", {
    layers : 'mosaico_total_norte_v2_rec',
    format : 'image/png',
    transparent : true
});

var mosaicoImgNordesteLayer = new L.TileLayer.WMS("http://geocatalogos.sccon.com.br:80/erdas-apollo/coverage/MMA_MOSAICO_QL_NORDESTE_ENTREGA_3", {
    layers : 'nordeste_total_13_12',
    format : 'image/png',
    transparent : true
});

var mosaicoImgCentroOesteLayer = new L.TileLayer.WMS("http://geocatalogos.sccon.com.br:80/erdas-apollo/coverage/MMA_MOSAICO_QL_CENTRO_OESTE_ENTREGA_3", {
    layers : 'mosaico_centroeste_entrega_1_v2_t',
    format : 'image/png',
    transparent : true
});

var mosaicoImgSulLayer = new L.TileLayer.WMS("http://geocatalogos.sccon.com.br:80/erdas-apollo/coverage/MMA_MOSAICO_QL_SUL_ENTREGA_3", {
    layers : 'mosaico_sul_entrega_1_v3_11_12_rec',
    format : 'image/png',
    transparent : true
});

var mosaicoImgSudesteLayer = new L.TileLayer.WMS("http://geocatalogos.sccon.com.br:80/erdas-apollo/coverage/MMA_MOSAICO_QL_SUDESTE_ENTREGA_3", {
    layers : 'mosaico_sudeste_entrega_1_v3_11_12_rec',
    format : 'image/png',
    transparent : true
});

var mosaicoRapidEye = L.layerGroup([mosaicoImgNordesteLayer, mosaicoImgNorteLayer, mosaicoImgCentroOesteLayer, mosaicoImgSulLayer, mosaicoImgSudesteLayer]);

$('.map').addClass('overlay');
var map = new L.Map('map-container', {
    center : new L.LatLng(-10.0, -58.0),
    zoom : 6,
    layers : [openstreet],
    zoomControl : true
});
$('.map').removeClass('overlay');

var baseMaps = {
    "Google" : googlemap,
    "Open Street Maps" : openstreet
};

    // "<img src=\"http://siscom.ibama.gov.br/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=cemam:alerta_teste\"> Indicativo DETER 2013" : alertaLayer,
var overlayMaps = {
    "<img src=\"\"> Imagens RapidEye 2011" : mosaicoRapidEye,
    '<img src="http://www.hexinformatica.com.br/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=hex:municipios_ibge"> Municipios' : municipiosLayer,
    "<img src=\"http://www.hexinformatica.com.br/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=hex:rodovias_federais\"> Rodovias Federais" : rodoviasLayer,
    "<img src=\"http://www.hexinformatica.com.br/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=hex:hidro_intermitente\"> Hidro Intermitente" : hidroInterLayer,
    "<img src=\"http://www.hexinformatica.com.br/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=hex:hidro_perene\"> Hidro Perene" : hidroPereLayer,
    "<img src=\"http://www.hexinformatica.com.br/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=hex:hidrografia_poligono\"> Hidro Polígonos" : hidroPolyLayer,
    "<img src=\"http://www.hexinformatica.com.br/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=hex:assentamentos\"> Assentamentos" : assentamentosLayer,
    "<img src=\"http://www.hexinformatica.com.br/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=hex:estados_ibge\"> Estados" : estadosLayer,
    "<img src=\"http://www.hexinformatica.com.br/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=hex:imovel_certificado\"> Imóveis Certificados" : imoveisLayer,
    "<img src=\"http://www.hexinformatica.com.br/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=hex:terras_indigenas\"> Terras Indígenas" : terrasIndigenasLayer,
    "<img src=\"http://www.hexinformatica.com.br/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=hex:ucs_protecao_integral\"> UCs de Proteção Integral" : ucsProtecaoLayer,
    "<img src=\"http://www.hexinformatica.com.br/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=hex:ucs_uso_sustentavel\"> UCs de Uso Sustentável" : ucsSustentavelLayer,
    "<img src=\"http://www.hexinformatica.com.br/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=hex:biomas\"> Biomas" : biomasLayer,
};

// add layer menu
L.control.layers(baseMaps, overlayMaps).addTo(map);

// add scale
L.control.scale().addTo(map);

// display stations
var alertaLayer = new lvector.PRWSF({
  url: "../siscom/rest/",
  geotable: "alerta",
  fields: "objectid",
  srid: 4618,
  geomFieldName: 'shape',
  showAll: true,
  popupTemplate: '<div class="iw-content"><center><h3>{objectid}</h3></center></div>',
  singlePopup: true,
  where: "ano = '2013'",
  symbology: {
    type: "single",
    vectorOptions: {
      fillColor: "#ff0000",
      fillOpacity: 1,
      weight: 1.8,
      color: "#2f4a00",
      opacity: 1,
    }
  }
});

alertaLayer.setMap(map);
